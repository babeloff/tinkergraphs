= GitHub Pages Setup Instructions for TinkerGraphs Documentation

This guide provides step-by-step instructions for setting up GitHub Pages to automatically deploy the TinkerGraphs documentation website.

== Overview

The TinkerGraphs project uses GitHub Pages to host comprehensive documentation including:

* *API Reference*: Auto-generated Kotlin documentation (Dokka)
* *User Guides*: Getting started, migration guides, and tutorials
* *Examples*: Comprehensive API usage examples
* *Changelog*: Implementation summaries and release notes

The documentation is automatically built and deployed using GitHub Actions whenever changes are pushed to the main branch.

== Prerequisites

* Repository with admin access or maintainer permissions
* GitHub Pages feature enabled for your organization/account
* Basic understanding of GitHub Actions and workflows

== Step 1: Enable GitHub Pages

=== 1.1 Access Repository Settings

. Navigate to your TinkerGraphs repository on GitHub
. Click on the *Settings* tab (requires admin/maintainer access)
. Scroll down to the *Pages* section in the left sidebar

=== 1.2 Configure Pages Source

. In the *Pages* section, find *Source* settings
. Select *GitHub Actions* from the dropdown (recommended)
** This allows custom workflows to deploy to Pages
** Alternative: Select *Deploy from a branch* if you prefer branch-based deployment

=== 1.3 Set Custom Domain (Optional)

If you want to use a custom domain:

. Enter your domain name (e.g., `docs.tinkergraphs.org`)
. Create a CNAME file in your repository root with the custom domain
. Configure DNS settings with your domain provider

== Step 2: Verify Workflow Configuration

The repository already includes the GitHub Actions workflow at `.github/workflows/docs.yml`.
Verify the configuration:

=== 2.1 Check Workflow File

Ensure the workflow file contains the correct configuration:

[source,yaml]
----
name: Deploy Documentation to GitHub Pages

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write
----

=== 2.2 Verify Workflow Permissions

The workflow needs specific permissions:

* `contents: read` - To checkout the repository
* `pages: write` - To deploy to GitHub Pages
* `id-token: write` - For GitHub Pages deployment

== Step 3: Configure Repository Permissions

=== 3.1 Actions Permissions

. Go to *Settings* â†’ *Actions* â†’ *General*
. Under *Actions permissions*, ensure one of these is selected:
** *Allow all actions and reusable workflows*
** *Allow actions created by GitHub and select non-GitHub actions*
. Under *Workflow permissions*, select:
** *Read and write permissions*
** Check âœ… *Allow GitHub Actions to create and approve pull requests*

=== 3.2 Pages Permissions

. Go to *Settings* â†’ *Pages*
. Verify *Source* is set to *GitHub Actions*
. Check *Enforce HTTPS* (recommended)

== Step 4: Test the Deployment

=== 4.1 Trigger Initial Deployment

. Make a small change to any documentation file (e.g., update a README)
. Commit and push to the main branch:
+
[source,bash]
----
git add .
git commit -m "Trigger docs deployment"
git push origin main
----

=== 4.2 Monitor Workflow Execution

. Go to the *Actions* tab in your repository
. Look for the "Deploy Documentation to GitHub Pages" workflow
. Click on the running workflow to see progress
. The workflow includes these steps:
** Build project with pixi/gradle
** Generate API documentation with Dokka
** Create documentation site structure
** Deploy to GitHub Pages

=== 4.3 Verify Deployment

Once the workflow completes successfully:

. Go to *Settings* â†’ *Pages*
. You should see: "Your site is published at https://[username].github.io/[repository]/"
. Click the link to verify your documentation site is live

== Step 5: Customize Documentation

=== 5.1 Update Site Configuration

Edit the main index page generation in `.github/workflows/docs.yml`:

[source,yaml]
----
- name: Generate main index page
  run: |
    cat > docs-site/index.html << 'EOF'
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <title>Your Project Documentation</title>
        <!-- Customize title, colors, branding -->
----

=== 5.2 Add Custom CSS/Branding

. Create a `docs/assets/` directory
. Add custom CSS files, logos, or other assets
. Update the workflow to copy these files:
+
[source,yaml]
----
- name: Copy custom assets
  run: |
    if [ -d "docs/assets" ]; then
      cp -r docs/assets/* docs-site/
    fi
----

=== 5.3 Configure Navigation

The generated site includes automatic navigation to:

* API documentation (generated by Dokka)
* User guides (from `docs/guides/`)
* Changelog (from `docs/changelog/`)
* Examples and tutorials

== Step 6: Advanced Configuration

=== 6.1 Custom Domain Setup

For a custom domain like `docs.yourproject.com`:

*DNS Configuration* (with your domain provider):
[source]
----
CNAME docs CNAME username.github.io
----

*Repository Configuration*:

* Add `docs.yourproject.com` in Settings â†’ Pages â†’ Custom domain
* Create `CNAME` file in repository root:
+
[source]
----
docs.yourproject.com
----

=== 6.2 SEO and Meta Tags

Update the index page template to include SEO optimization:

[source,html]
----
<meta name="description" content="TinkerGraphs - High-performance multiplatform graph database">
<meta name="keywords" content="graph database, kotlin multiplatform, tinkerpop, gremlin">
<meta property="og:title" content="TinkerGraphs Documentation">
<meta property="og:description" content="Comprehensive documentation for TinkerGraphs">
----

=== 6.3 Analytics Integration

Add Google Analytics or other analytics:

[source,html]
----
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
</script>
----

== Troubleshooting

=== Common Issues

*Issue*: "Page build and deployment" workflow fails

* *Solution*: Check Actions permissions and ensure `pages: write` permission is granted

*Issue*: Site shows 404 or doesn't load

* *Solution*: Verify the `docs-site` directory structure and index.html file

*Issue*: API documentation is empty

* *Solution*: Check if Dokka generation succeeds in the workflow logs

*Issue*: Custom domain not working

* *Solution*: Verify DNS settings and CNAME file configuration

=== Workflow Debugging

To debug workflow issues:

*Check workflow logs*:

* Go to Actions tab â†’ Click on failed workflow
* Expand each step to see detailed logs

*Test locally*:

[source,bash]
----
pixi run docs
ls -la build/dokka/html/
----

*Validate HTML output*:

[source,bash]
----
# Check if index.html was generated
cat docs-site/index.html
----

=== Performance Optimization

*Enable caching* to speed up builds:

[source,yaml]
----
- name: Cache Dokka
  uses: actions/cache@v3
  with:
    path: build/dokka
    key: ${{ runner.os }}-dokka-${{ hashFiles('src/**/*.kt') }}
----

*Minimize build time* by only rebuilding when necessary:

[source,yaml]
----
on:
  push:
    branches: [ main ]
    paths:
      - 'src/**'
      - 'docs/**'
      - 'build.gradle.kts'
----

== Security Considerations

. *Token Permissions*: Use minimal required permissions
. *Branch Protection*: Protect main branch to prevent unauthorized documentation changes
. *Review Process*: Require reviews for documentation changes
. *Content Security*: Validate that generated content doesn't include sensitive information

== Maintenance

=== Regular Tasks

. *Monitor workflow runs* for failures
. *Update dependencies* in the workflow (actions versions)
. *Review generated content* for accuracy
. *Check broken links* periodically
. *Update documentation* with new features

=== Backup Strategy

Consider backing up your documentation:

. *Repository backups*: GitHub automatically backs up repositories
. *Generated site backup*: Optionally archive generated sites
. *Asset backups*: Back up custom assets and configurations

== Support and Resources

* *GitHub Pages Documentation*: https://docs.github.com/en/pages
* *GitHub Actions Documentation*: https://docs.github.com/en/actions
* *Dokka Documentation*: https://kotlin.github.io/dokka/
* *TinkerGraphs Issues*: Report documentation issues in the project repository

== Example Sites

Here are examples of well-configured documentation sites using similar setups:

* *Kotlin Documentation*: https://kotlinlang.org/docs/
* *Apache TinkerPop*: https://tinkerpop.apache.org/docs/
* *Ktor Documentation*: https://ktor.io/docs/

Your TinkerGraphs documentation will be available at:

* *Default*: https://[username].github.io/tinkergraphs/
* *Custom domain*: https://docs.tinkergraphs.org/ (if configured)

== Next Steps

After setting up GitHub Pages:

. âœ… Verify documentation builds and deploys correctly
. âœ… Test all navigation links and sections
. âœ… Set up monitoring for failed deployments
. âœ… Configure custom domain (if desired)
. âœ… Set up analytics (if desired)
. âœ… Create process for regular documentation updates
. âœ… Train team members on documentation workflow

Your TinkerGraphs documentation site is now ready for automatic deployment! ðŸš€
